<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>محاسبه شاخص‌های بدنی</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css" />
</head>
<body>
  <div class="app">
    <header class="glass">
      <h1>ابزار محاسبه شاخص‌های بدنی</h1>
      <p>فرم شمسی + DatePicker واقعی + PDF فارسی RTL + چاپ حرفه‌ای</p>
    </header>

    <section class="glass form">
      <div class="grid">
        <div class="field">
          <label>جنسیت</label>
          <select id="sex">
            <option value="female">دختر</option>
            <option value="male">پسر</option>
          </select>
        </div>

        <div class="field">
          <label>وزن (کیلوگرم)</label>
          <input id="weight" type="number" step="0.1" placeholder="مثلاً 45" />
        </div>

        <div class="field">
          <label>قد (سانتی‌متر)</label>
          <input id="height" type="number" step="0.1" placeholder="مثلاً 155" />
        </div>

        <div class="field">
          <label>تاریخ تولد (شمسی)</label>
          <input id="birthJ" type="text" class="p-date" placeholder="مثلاً 1390/08/12" />
        </div>

        <div class="field">
          <label>تاریخ محاسبه (شمسی)</label>
          <input id="refJ" type="text" class="p-date" placeholder="مثلاً 1404/11/21" />
        </div>

        <div class="field">
          <label>سطح فعالیت</label>
          <select id="activity">
            <option value="sedentary">خیلی کم‌تحرک</option>
            <option value="light">کم‌تحرک</option>
            <option value="moderate" selected>متوسط</option>
            <option value="active">فعال</option>
            <option value="very_active">بسیار فعال</option>
          </select>
        </div>

        <div class="field">
          <label>هدف</label>
          <select id="goal">
            <option value="maintenance" selected>حفظ وزن</option>
            <option value="gain">افزایش وزن</option>
            <option value="muscle">افزایش عضله</option>
            <option value="fatloss">کاهش چربی (بدون افت عضله)</option>
          </select>
        </div>
      </div>

      <div class="btn-row">
        <button id="calcBtn">محاسبه</button>
        <button id="pdfBtn" class="secondary">خروجی PDF فارسی</button>
        <button id="printBtn" class="secondary">چاپ حرفه‌ای</button>
      </div>

      <div id="error" class="error"></div>
    </section>

    <section class="glass results" id="screenResults">
      <h2>نتایج</h2>
      <div class="result-grid">
        <div class="card"><span>سن (سال)</span><b id="ageYears">-</b></div>
        <div class="card"><span>سن (ماه)</span><b id="ageMonths">-</b></div>
        <div class="card"><span>BMI</span><b id="bmi">-</b></div>
        <div class="card"><span>Z-Score</span><b id="zScore">-</b></div>
        <div class="card"><span>Percentile</span><b id="percentile">-</b></div>
        <div class="card"><span>وضعیت</span><b id="status">-</b></div>
        <div class="card"><span>BMR</span><b id="bmr">-</b></div>
        <div class="card"><span>TDEE</span><b id="tdee">-</b></div>
      </div>

      <div class="targets">
        <h3>کالری هدفمند</h3>
        <ul>
          <li>حفظ وزن: <b id="t_maint">-</b> kcal</li>
          <li>افزایش وزن: <b id="t_gain">-</b> kcal</li>
          <li>افزایش عضله: <b id="t_muscle">-</b> kcal</li>
          <li>کاهش چربی: <b id="t_loss">-</b> kcal</li>
        </ul>
      </div>

      <div class="recs">
        <h3>توصیه‌ها</h3>
        <ul id="recsList"></ul>
      </div>
    </section>

    <section class="print-sheet" id="printSection">
      <div class="print-header">
        <div>
          <h2>گزارش شاخص‌های بدنی</h2>
          <div class="muted">نسخه چاپی و PDF فارسی</div>
        </div>
        <div class="print-meta">
          <div>تاریخ گزارش: <b id="p_reportDate">-</b></div>
          <div>تاریخ تولد: <b id="p_birth">-</b></div>
        </div>
      </div>

      <div class="print-grid">
        <div class="p-card">سن (سال): <b id="p_ageYears">-</b></div>
        <div class="p-card">سن (ماه): <b id="p_ageMonths">-</b></div>
        <div class="p-card">BMI: <b id="p_bmi">-</b></div>
        <div class="p-card">Z-Score: <b id="p_z">-</b></div>
        <div class="p-card">Percentile: <b id="p_pct">-</b></div>
        <div class="p-card">وضعیت: <b id="p_status">-</b></div>
        <div class="p-card">BMR: <b id="p_bmr">-</b> kcal</div>
        <div class="p-card">TDEE: <b id="p_tdee">-</b> kcal</div>
      </div>

      <div class="print-block">
        <h3>کالری هدفمند</h3>
        <ul>
          <li>حفظ وزن: <b id="p_maint">-</b> kcal</li>
          <li>افزایش وزن: <b id="p_gain">-</b> kcal</li>
          <li>افزایش عضله: <b id="p_muscle">-</b> kcal</li>
          <li>کاهش چربی: <b id="p_loss">-</b> kcal</li>
        </ul>
      </div>

      <div class="print-block">
        <h3>توصیه‌ها</h3>
        <ul id="p_recs"></ul>
      </div>

      <div class="print-footer">
        این گزارش صرفاً جهت اطلاع بوده و جایگزین مشاوره تخصصی نیست.
      </div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script src="App.js"></script>
</body>
</html>
